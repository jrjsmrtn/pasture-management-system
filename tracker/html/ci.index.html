<!-- SPDX-FileCopyrightText: 2025 Georges Martin <jrjsmrtn@gmail.com> -->
<!-- SPDX-License-Identifier: MIT -->
<tal:block metal:use-macro="templates/page/macros/icing">
<title metal:fill-slot="head_title">
  <span tal:omit-tag="true">CMDB - Configuration Items</span>
  - <span tal:replace="config/TRACKER_NAME" />
</title>
<span metal:fill-slot="body_title" tal:omit-tag="true">
  CMDB - Configuration Items
</span>
<td class="content" metal:fill-slot="content">

<p tal:condition="python:not context.is_view_ok()">
 You are not allowed to view this page.</p>

<tal:block tal:condition="context/is_view_ok">

 <!-- Display "New Configuration Item" button -->
 <div class="action-buttons">
  <a tal:attributes="href string:ci?@template=item"
     class="btn btn-primary">New Configuration Item</a>
 </div>

 <!-- Simple CI list -->
 <tal:block tal:define="batch request/batch">
  <p tal:condition="python:batch and batch.sequence_length == 0">
   No configuration items found. Click "New Configuration Item" to create one.
  </p>

  <table class="list" tal:condition="python:batch and batch.sequence_length > 0">
   <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Type</th>
    <th>Status</th>
    <th>Criticality</th>
   </tr>
   <tr tal:repeat="ci batch">
    <td tal:content="ci/id">&nbsp;</td>
    <td>
     <a tal:attributes="href string:ci${ci/id}"
        tal:content="python:str(ci.name.plain()) or '[no name]'">name</a>
    </td>
    <td tal:content="python:ci.type.plain() or ''">&nbsp;</td>
    <td tal:content="python:ci.status.plain() or ''">&nbsp;</td>
    <td tal:content="python:ci.criticality.plain() or ''">&nbsp;</td>
   </tr>
  </table>
 </tal:block>

</tal:block>

</td>
</tal:block>
